(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){e.exports=a(295)},126:function(e,t,a){},128:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(15),o=a.n(s),r=a(296),l=(a(126),a(30)),c=a(31),m=a(35),u=a(32),p=a(36),d=(a(128),a(298)),g=a(297),h=a(18),f=a(106),b=a.n(f),E=a(108),v=a.n(E),w=a(109),y=a.n(w),O=a(33),N=a.n(O),j=a(110),k=a.n(j),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this))).state={open:!1,data:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"componentWillMount",value:function(){var e;e=this,fetch("/api/roomList",{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.setState({data:t})})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.data;return i.a.createElement("div",{className:e.root},i.a.createElement(b.a,{className:e.gridList,cols:1,cellHeight:200},t&&t.map(function(t){return i.a.createElement(v.a,{key:t.name},i.a.createElement("img",{src:t.imgSrc,alt:t.name}),i.a.createElement(y.a,{title:t.name,classes:{root:e.titleBar,title:e.title},actionIcon:i.a.createElement(N.a,{onClick:function(){return window.location.replace("/#/chat/".concat(t.uuid))}},i.a.createElement(k.a,{className:e.icon}))}))})))}}]),t}(i.a.Component),C=Object(h.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:"800px",height:"700"},icon:{color:"rgba(255, 255, 255, 0.54)"}}})(S),x=a(120),W=a(114),L=a.n(W),B=a(115),M=a.n(B),_=a(116),F=a.n(_),J=a(113),G=a.n(J),I=a(34),R=a.n(I),A=a(67),H=a(29),T=a.n(H),U=a(22),D=a.n(U);var K=Object(h.withStyles)(function(e){return{root:Object(A.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,"border-radius":0}),root2:Object(A.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,maxWidth:"100%","border-radius":0}),img:{maxWidth:"100%"}}})(function(e){var t=e.classes,a=e.event;return i.a.createElement("div",null,"message"===a.type?i.a.createElement(T.a,{className:t.root,elevation:1},i.a.createElement(D.a,{variant:"h5",component:"h3",align:"left"},a.name),i.a.createElement(D.a,{component:"p",align:"left"},a.message)):"image"===a.type?i.a.createElement(T.a,{className:t.root2,elevation:1},i.a.createElement(D.a,{variant:"h5",component:"h3",align:"left"},a.name),i.a.createElement("img",{className:t.img,src:a.message})):a.message)}),V=a(66),Z=a.n(V),$=a(5),q=a.n($),z=a(111),P=a.n(z),Q=a(112),X=a.n(Q);var Y=Object(h.withStyles)(function(e){return{fab:{margin:2*e.spacing.unit},absolute:{position:"absolute",bottom:2*e.spacing.unit,right:3*e.spacing.unit},icon:{margin:2*e.spacing.unit}}})(function(e){var t=e.classes,a=e.name;return i.a.createElement("div",null,i.a.createElement(P.a,{title:a||" "},i.a.createElement(N.a,{"aria-label":a},i.a.createElement(X.a,{className:q()(t.icon,"fas fa-user-alt")}))))}),ee=a(48),te=a.n(ee),ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this))).addMessage=function(e){a.setState({messageList:Object(x.a)(a.state.messageList).concat([e])})},a.handleMessage=function(){a.state.ws.send(JSON.stringify({type:"message",name:a.state.name,message:a.state.message})),a.setState({message:""})},a.handleNameChange=function(e){a.setState({name:e.target.value})},a.handleMessageChange=function(e){a.setState({message:e.target.value})},a.onFileLoad=function(e,t){return console.log(e.target.result,t.name)},a.state={name:"anonymous",open:!0,ws:null,messageList:[],message:"",population:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=new WebSocket("wss://".concat(window.location.host,"/websocket/").concat(this.props.match.params.port));this.setState({ws:e})}},{key:"componentWillUnmount",value:function(){this.state.ws.close()}},{key:"handleSubmit",value:function(){var e=this;this.state.ws.addEventListener("message",function(t){var a=JSON.parse(t.data);"pop"===a.type?(console.log(a.message),e.setState({population:a.message})):e.addMessage(JSON.parse(t.data))}),this.state.ws.send(JSON.stringify({type:"greetings",name:this.state.name})),this.setState({open:!1})}},{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement("div",{className:te.a.container},i.a.createElement("div",{className:te.a.onlineWrap},i.a.createElement("span",null,"Online:"),this.state.population.map(function(e){return i.a.createElement(Y,{id:e.id,name:e.name})})),i.a.createElement("div",{className:t.map},this.state.messageList.map(function(e,t){return i.a.createElement(K,{key:t,event:e})})),i.a.createElement(G.a,{open:this.state.open,"aria-labelledby":"scroll-dialog-title"},i.a.createElement(L.a,{id:"scroll-dialog-title"},"Choose your nick"),i.a.createElement(M.a,null,i.a.createElement(Z.a,{id:"standard-name",label:"Name",className:t.textField,value:this.state.name,onChange:this.handleNameChange,margin:"normal"})),i.a.createElement(F.a,null,i.a.createElement(R.a,{onClick:function(){return e.handleSubmit()},color:"primary",disabled:""===this.state.name},"\u041e\u043a"))),i.a.createElement("div",{className:te.a.bottom},i.a.createElement(Z.a,{id:"input",className:t.messageField,value:this.state.message,onChange:this.handleMessageChange,margin:"normal"}),i.a.createElement(R.a,{onClick:function(){return e.handleMessage()},color:"primary",disabled:""===this.state.message},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),i.a.createElement("input",{accept:"image/*",className:t.imgInput,id:"contained-button-file",multiple:!0,type:"file",onChange:function(t){if(t.target.files.length){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=function(){e.state.ws.send(JSON.stringify({type:"image",name:e.state.name,message:a.result}))}}}}),i.a.createElement("label",{htmlFor:"contained-button-file"},i.a.createElement(R.a,{color:"primary",component:"span",className:t.uploadButton},"Upload"))))}}]),t}(i.a.Component),ne=Object(h.withStyles)({textField:{width:200},messageField:{width:"fill-available"},paper:{borderRadius:0},imgInput:{display:"none"},uploadButton:{minHeight:"64px"}})(ae),ie=a(117),se=a.n(ie),oe=a(118),re=a.n(oe);var le=Object(h.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},headerLinkContainer:{width:100},pointer:{cursor:"pointer"}})(function(e){var t=e.classes;return i.a.createElement("div",{className:t.root},i.a.createElement(se.a,{position:"static"},i.a.createElement(re.a,null,i.a.createElement(N.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"}),i.a.createElement(D.a,{variant:"h6",color:"inherit",className:t.grow},i.a.createElement("span",{className:t.pointer,onClick:function(){return window.location.replace("/#/")}},"wsChat")))))}),ce=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(le,null),i.a.createElement("div",{style:{height:window.innerHeight-200}},i.a.createElement(d.a,null,i.a.createElement(g.a,{exact:!0,path:"/",component:C}),i.a.createElement(g.a,{path:"/chat/:port",component:ne}))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(r.a,null,i.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},48:function(e,t,a){e.exports={container:"chat_container__2GAlK",bottom:"chat_bottom__3tVWZ",onlineWrap:"chat_onlineWrap__2n0jS"}}},[[121,2,1]]]);
//# sourceMappingURL=main.f0915b4e.chunk.js.map