(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,a){e.exports={container:"chat_container__2GAlK",bottom:"chat_bottom__3tVWZ"}},249:function(e,t,a){e.exports=a(581)},254:function(e,t,a){},256:function(e,t,a){},581:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(20),o=a.n(i),r=a(582),l=(a(254),a(67)),c=a(68),m=a(71),u=a(69),d=a(72),h=(a(256),a(584)),p=a(583),g=a(33),f=a(236),b=a.n(f),v=a(238),w=a.n(v),E=a(239),y=a.n(E),O=a(102),N=a.n(O),j=a(240),k=a.n(j),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this))).state={open:!1,data:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"componentWillMount",value:function(){var e;e=this,fetch("/api/roomList",{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.setState({data:t})})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.data;return s.a.createElement("div",{className:e.root},s.a.createElement(b.a,{className:e.gridList,cols:1,cellHeight:200},t&&t.map(function(t){return s.a.createElement(w.a,{key:t.name},s.a.createElement("img",{src:t.imgSrc,alt:t.name}),s.a.createElement(y.a,{title:t.name,classes:{root:e.titleBar,title:e.title},actionIcon:s.a.createElement(N.a,{onClick:function(){return window.location.replace("/#/chat/".concat(t.uuid))}},s.a.createElement(k.a,{className:e.icon}))}))})))}}]),t}(s.a.Component),S=Object(g.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:"800px",height:"700"},icon:{color:"rgba(255, 255, 255, 0.54)"}}})(C),x=a(248),L=a(242),W=a.n(L),B=a(243),M=a.n(B),F=a(244),J=a.n(F),_=a(241),G=a.n(_),I=a(70),R=a.n(I),A=a(154),H=a(47),T=a.n(H),U=a(48),D=a.n(U);var K=Object(g.withStyles)(function(e){return{root:Object(A.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,"border-radius":0}),root2:Object(A.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,maxWidth:"100%","border-radius":0}),img:{maxWidth:"100%"}}})(function(e){var t=e.classes,a=e.event;return s.a.createElement("div",null,"message"===a.type?s.a.createElement(T.a,{className:t.root,elevation:1},s.a.createElement(D.a,{variant:"h5",component:"h3",align:"left"},a.name),s.a.createElement(D.a,{component:"p",align:"left"},a.message)):"image"===a.type?s.a.createElement(T.a,{className:t.root2,elevation:1},s.a.createElement(D.a,{variant:"h5",component:"h3",align:"left"},a.name),s.a.createElement("img",{className:t.img,src:a.message})):a.message)}),V=a(153),Z=a.n(V),$=(a(357),a(152)),q=a.n($),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this))).addMessage=function(e){a.setState({messageList:Object(x.a)(a.state.messageList).concat([e])})},a.handleMessage=function(){a.state.ws.send(JSON.stringify({type:"message",name:a.state.name,message:a.state.message})),a.setState({message:""})},a.handleNameChange=function(e){a.setState({name:e.target.value})},a.handleMessageChange=function(e){a.setState({message:e.target.value})},a.onFileLoad=function(e,t){return console.log(e.target.result,t.name)},a.state={name:"anonymous",open:!0,ws:null,messageList:[],message:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=new WebSocket("wss://".concat(window.location.host,"/websocket/").concat(this.props.match.params.port));this.setState({ws:e})}},{key:"componentWillUnmount",value:function(){this.state.ws.close()}},{key:"handleSubmit",value:function(){var e=this;this.state.ws.addEventListener("message",function(t){e.addMessage(JSON.parse(t.data))}),this.state.ws.send(JSON.stringify({type:"greetings",name:this.state.name})),this.setState({open:!1})}},{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement("div",{className:q.a.container},s.a.createElement("div",{className:t.map},this.state.messageList.map(function(e,t){return s.a.createElement(K,{key:t,event:e})})),s.a.createElement(G.a,{open:this.state.open,"aria-labelledby":"scroll-dialog-title"},s.a.createElement(W.a,{id:"scroll-dialog-title"},"Choose your nick"),s.a.createElement(M.a,null,s.a.createElement(Z.a,{id:"standard-name",label:"Name",className:t.textField,value:this.state.name,onChange:this.handleNameChange,margin:"normal"})),s.a.createElement(J.a,null,s.a.createElement(R.a,{onClick:function(){return e.handleSubmit()},color:"primary",disabled:""===this.state.name},"\u041e\u043a"))),s.a.createElement("div",{className:q.a.bottom},s.a.createElement(Z.a,{id:"input",className:t.messageField,value:this.state.message,onChange:this.handleMessageChange,margin:"normal"}),s.a.createElement(R.a,{onClick:function(){return e.handleMessage()},color:"primary",disabled:""===this.state.message},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),s.a.createElement("input",{accept:"image/*",className:t.imgInput,id:"contained-button-file",multiple:!0,type:"file",onChange:function(t){if(t.target.files.length){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=function(){e.state.ws.send(JSON.stringify({type:"image",name:e.state.name,message:a.result}))}}}}),s.a.createElement("label",{htmlFor:"contained-button-file"},s.a.createElement(R.a,{color:"primary",component:"span",className:t.uploadButton},"Upload"))))}}]),t}(s.a.Component),P=Object(g.withStyles)({textField:{width:200},messageField:{width:"fill-available"},paper:{borderRadius:0},imgInput:{display:"none"},uploadButton:{minHeight:"64px"}})(z),Q=a(245),X=a.n(Q),Y=a(246),ee=a.n(Y);var te=Object(g.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},headerLinkContainer:{width:100},pointer:{cursor:"pointer"}})(function(e){var t=e.classes;return s.a.createElement("div",{className:t.root},s.a.createElement(X.a,{position:"static"},s.a.createElement(ee.a,null,s.a.createElement(N.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"}),s.a.createElement(D.a,{variant:"h6",color:"inherit",className:t.grow},s.a.createElement("span",{className:t.pointer,onClick:function(){return window.location.replace("/#/")}},"wsChat")))))}),ae=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(te,null),s.a.createElement("div",{style:{height:window.innerHeight-200}},s.a.createElement(h.a,null,s.a.createElement(p.a,{exact:!0,path:"/",component:S}),s.a.createElement(p.a,{path:"/chat/:port",component:P}))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(r.a,null,s.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[249,2,1]]]);
//# sourceMappingURL=main.9fbbd1b4.chunk.js.map